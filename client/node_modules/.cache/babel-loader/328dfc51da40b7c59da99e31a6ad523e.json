{"ast":null,"code":"import _toConsumableArray from\"/Users/sherifbutt/Library/Mobile Documents/com~apple~CloudDocs/WORK/learning code/js/react/react-task-tracker/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _objectSpread from\"/Users/sherifbutt/Library/Mobile Documents/com~apple~CloudDocs/WORK/learning code/js/react/react-task-tracker/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"/Users/sherifbutt/Library/Mobile Documents/com~apple~CloudDocs/WORK/learning code/js/react/react-task-tracker/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/sherifbutt/Library/Mobile Documents/com~apple~CloudDocs/WORK/learning code/js/react/react-task-tracker/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/sherifbutt/Library/Mobile Documents/com~apple~CloudDocs/WORK/learning code/js/react/react-task-tracker/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useState,useEffect}from\"react\";import{BrowserRouter as Router,Route}from\"react-router-dom\";import Header from\"./componenets/Header\";import Tasks from\"./componenets/Tasks\";import AddTask from\"./componenets/AddTask\";import Footer from\"./componenets/Footer\";import About from\"./componenets/About\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),tasks=_useState2[0],setTasks=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),showAddTaskForm=_useState4[0],setShowAddTaskForm=_useState4[1];useEffect(function(){var getTasks=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var tasksFromServer;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetchTasks();case 2:tasksFromServer=_context.sent;setTasks(tasksFromServer);case 4:case\"end\":return _context.stop();}}},_callee);}));return function getTasks(){return _ref.apply(this,arguments);};}();getTasks();},[]);//REST\n// fetch Tasks\nvar fetchTasks=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var res,data;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return fetch(\"http://localhost:8000/tasks\");case 2:res=_context2.sent;_context2.next=5;return res.json();case 5:data=_context2.sent;return _context2.abrupt(\"return\",data);case 7:case\"end\":return _context2.stop();}}},_callee2);}));return function fetchTasks(){return _ref2.apply(this,arguments);};}();// fetch Task\nvar fetchTask=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(id){var res,data;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return fetch(\"http://localhost:8000/tasks/\".concat(id),{method:\"GET\"});case 2:res=_context3.sent;_context3.next=5;return res.json();case 5:data=_context3.sent;return _context3.abrupt(\"return\",data);case 7:case\"end\":return _context3.stop();}}},_callee3);}));return function fetchTask(_x){return _ref3.apply(this,arguments);};}();// Update data\nvar updateData=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(id,data){return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return fetch(\"http://localhost:8000/tasks/\".concat(id),{method:\"PUT\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(data)});case 2:case\"end\":return _context4.stop();}}},_callee4);}));return function updateData(_x2,_x3){return _ref4.apply(this,arguments);};}();// Delete Task\nvar deleteTask=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(id){return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.next=2;return fetch(\"http://localhost:8000/tasks/\".concat(id),{method:\"DELETE\"});case 2:setTasks(tasks.filter(function(task){return task.id!==id;}));case 3:case\"end\":return _context5.stop();}}},_callee5);}));return function deleteTask(_x4){return _ref5.apply(this,arguments);};}();// Toggle reminder\nvar toggleReminder=/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(id){var taskToChange,changedTask;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:setTasks(tasks.map(function(task){return task.id===id?_objectSpread(_objectSpread({},task),{},{reminder:!task.reminder}):task;}));_context6.next=3;return fetchTask(id);case 3:taskToChange=_context6.sent;_context6.next=6;return _objectSpread(_objectSpread({},taskToChange),{},{reminder:!taskToChange.reminder});case 6:changedTask=_context6.sent;updateData(id,changedTask);case 8:case\"end\":return _context6.stop();}}},_callee6);}));return function toggleReminder(_x5){return _ref6.apply(this,arguments);};}();// Add Task\nvar addTask=/*#__PURE__*/function(){var _ref7=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(task){var res,data;return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:_context7.next=2;return fetch(\"http://localhost:8000/tasks\",{method:\"POST\",headers:{\"content-type\":\"application/json\"},body:JSON.stringify(task)});case 2:res=_context7.sent;_context7.next=5;return res.json();case 5:data=_context7.sent;setTasks([].concat(_toConsumableArray(tasks),[data]));// const newTask = { id: tasks.length + 1, ...task };\n// setTasks([...tasks, newTask]);\ncase 7:case\"end\":return _context7.stop();}}},_callee7);}));return function addTask(_x6){return _ref7.apply(this,arguments);};}();//Edit Task text\nvar editTask=/*#__PURE__*/function(){var _ref8=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee8(payload){var tasks,newTasks;return _regeneratorRuntime.wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:_context8.next=2;return fetchTasks();case 2:tasks=_context8.sent;// Fetch oldTaskInfo\n//const oldTaskInfo = await fetchTask(payload.id)//\n//  console.log('-->',payload,oldTaskInfo);\n// Replace oldTaskInfo with newTaskInfo\nnewTasks=tasks.map(function(task){return payload.id===task.id?_objectSpread(_objectSpread({},task),{},{text:payload.text}):task;});setTasks(newTasks);console.log(newTasks);// Update Tasks state with newTaskInfo\n// PUT newTaskInfo to server\nupdateData(payload.id,payload);case 7:case\"end\":return _context8.stop();}}},_callee8);}));return function editTask(_x7){return _ref8.apply(this,arguments);};}();return/*#__PURE__*/_jsx(Router,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(Header,{showAddTaskForm:showAddTaskForm,toggleAddTaskForm:function toggleAddTaskForm(){return setShowAddTaskForm(!showAddTaskForm);}}),/*#__PURE__*/_jsx(Route,{path:\"/\",exact:true,render:function render(props){return/*#__PURE__*/_jsxs(_Fragment,{children:[showAddTaskForm&&/*#__PURE__*/_jsx(AddTask,{addTask:addTask,showAddTaskForm:showAddTaskForm}),tasks.length>0?/*#__PURE__*/_jsx(Tasks,{tasks:tasks,deleteTask:deleteTask,toggleReminder:toggleReminder,editTask:editTask}):/*#__PURE__*/_jsx(\"div\",{className:\"task\",style:{backgroundColor:\"white\"},children:\"Sorry.. No tasks to show!\"})]});}}),/*#__PURE__*/_jsx(Route,{path:\"/about\",component:About}),/*#__PURE__*/_jsx(Footer,{})]})});}export default App;","map":{"version":3,"sources":["/Users/sherifbutt/Library/Mobile Documents/com~apple~CloudDocs/WORK/learning code/js/react/react-task-tracker/src/App.js"],"names":["useState","useEffect","BrowserRouter","Router","Route","Header","Tasks","AddTask","Footer","About","App","tasks","setTasks","showAddTaskForm","setShowAddTaskForm","getTasks","fetchTasks","tasksFromServer","fetch","res","json","data","fetchTask","id","method","updateData","headers","body","JSON","stringify","deleteTask","filter","task","toggleReminder","map","reminder","taskToChange","changedTask","addTask","editTask","payload","newTasks","text","console","log","props","length","backgroundColor"],"mappings":"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","sourcesContent":["import { useState, useEffect } from \"react\";\nimport { BrowserRouter as Router, Route } from \"react-router-dom\";\n\nimport Header from \"./componenets/Header\";\nimport Tasks from \"./componenets/Tasks\";\nimport AddTask from \"./componenets/AddTask\";\nimport Footer from \"./componenets/Footer\";\nimport About from \"./componenets/About\";\n\nfunction App() {\n  const [tasks, setTasks] = useState([]);\n  const [showAddTaskForm, setShowAddTaskForm] = useState(false);\n\n  useEffect(() => {\n    const getTasks = async () => {\n      const tasksFromServer = await fetchTasks();\n      setTasks(tasksFromServer);\n    };\n    getTasks();\n  }, []);\n\n  //REST\n  // fetch Tasks\n  const fetchTasks = async () => {\n    const res = await fetch(\"http://localhost:8000/tasks\");\n    const data = await res.json();\n\n    return data;\n  };\n\n  // fetch Task\n  const fetchTask = async (id) => {\n    const res = await fetch(`http://localhost:8000/tasks/${id}`, {\n      method: \"GET\",\n    });\n    const data = await res.json();\n    return data;\n  };\n\n  // Update data\n  const updateData = async (id, data) => {\n    await fetch(`http://localhost:8000/tasks/${id}`, {\n      method: \"PUT\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify(data),\n    });\n  };\n\n  // Delete Task\n  const deleteTask = async (id) => {\n    await fetch(`http://localhost:8000/tasks/${id}`, { method: \"DELETE\" });\n    setTasks(tasks.filter((task) => task.id !== id));\n  };\n\n  // Toggle reminder\n  const toggleReminder = async (id) => {\n    setTasks(\n      tasks.map((task) =>\n        task.id === id ? { ...task, reminder: !task.reminder } : task\n      )\n    );\n\n    const taskToChange = await fetchTask(id);\n\n    const changedTask = await {\n      ...taskToChange,\n      reminder: !taskToChange.reminder,\n    };\n\n    updateData(id, changedTask);\n  };\n\n  // Add Task\n  const addTask = async (task) => {\n    const res = await fetch(\"http://localhost:8000/tasks\", {\n      method: \"POST\",\n      headers: {\n        \"content-type\": \"application/json\",\n      },\n      body: JSON.stringify(task),\n    });\n    const data = await res.json();\n    setTasks([...tasks, data]);\n\n    // const newTask = { id: tasks.length + 1, ...task };\n    // setTasks([...tasks, newTask]);\n  };\n\n  //Edit Task text\n  const editTask =async (payload) => {\n    // Fetch tasks\n    const tasks = await fetchTasks()\n    // Fetch oldTaskInfo\n     //const oldTaskInfo = await fetchTask(payload.id)//\n    //  console.log('-->',payload,oldTaskInfo);\n    // Replace oldTaskInfo with newTaskInfo\n     \n     const newTasks= tasks.map(task =>  payload.id === task.id ? {...task, text: payload.text}:task)\n     setTasks(newTasks)\n    console.log(newTasks);\n    \n    // Update Tasks state with newTaskInfo\n    // PUT newTaskInfo to server\n    updateData(payload.id,payload)\n  }\n\n  return (\n    <Router>\n      <div className=\"container\">\n        <Header\n          showAddTaskForm={showAddTaskForm}\n          toggleAddTaskForm={() => setShowAddTaskForm(!showAddTaskForm)}\n        />\n\n        <Route\n          path=\"/\"\n          exact\n          render={(props) => (\n            <>\n              {showAddTaskForm && (\n                <AddTask addTask={addTask} showAddTaskForm={showAddTaskForm} />\n              )}\n\n              {tasks.length > 0 ? (\n                <Tasks\n                  tasks={tasks}\n                  deleteTask={deleteTask}\n                  toggleReminder={toggleReminder}\n                  editTask={editTask}\n                />\n              ) : (\n                <div className=\"task\" style={{ backgroundColor: \"white\" }}>\n                  Sorry.. No tasks to show!\n                </div>\n              )}\n            </>\n          )}\n        />\n        <Route path=\"/about\" component={About} />\n        <Footer />\n      </div>\n    </Router>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}